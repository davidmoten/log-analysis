
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples</title>
    <link href="../layout.css" rel="stylesheet" type="text/css">
    <!--[if lte IE 8]><script language="javascript" type="text/javascript" src="../excanvas.min.js"></script><![endif]-->
    <script language="javascript" type="text/javascript" src="../jquery.js"></script>
    <script language="javascript" type="text/javascript" src="../jquery.flot.js"></script>
 </head>
    <body>
    
    <div id="placeholder3" style="width:600px;height:300px"></div>

    <div id="placeholder" style="width:600px;height:300px"></div>

    <p>Flot supports lines, points, filled areas, bars and any
    combinations of these, in the same plot and even on the same data
    series.</p>
    
    <div id="placeholder2" style="width:600px;height:300px"></div>

<script type="text/javascript">
$(function () {
    var d1 = [];
    for (var i = 0; i < 14; i += 0.5)
        d1.push([i, Math.sin(i)]);

    var d2 = [[0, 3], [4, 8], [8, 5], [9, 13]];

    var d3 = [];
    for (var i = 0; i < 14; i += 0.5)
        d3.push([i, Math.cos(i)]);

    var d4 = [];
    for (var i = 0; i < 14; i += 0.1)
        d4.push([i, Math.sqrt(i * 10)]);
    
    var d5 = [];
    for (var i = 0; i < 14; i += 0.5)
        d5.push([i, Math.sqrt(i)]);

    var d6 = [];
    for (var i = 0; i < 14; i += 0.5 + Math.random())
        d6.push([i, Math.sqrt(2*i + Math.sin(i) + 5)]);
                        
    $.plot($("#placeholder"), [
        {
            data: d1,
            lines: { show: true, fill: true }
        },
        {
            data: d2,
            bars: { show: true }
        },
        {
            data: d3,
            points: { show: true }
        },
        {
            data: d4,
            lines: { show: true }
        },
        {
            data: d5,
            lines: { show: true },
            points: { show: true }
        },
        {
            data: d6,
            lines: { show: true, steps: true }
        }
    ]);
    
    var d7 = [[100,45678],[200,56789],[300,36789],[400,27000]];
    
    $.plot($("#placeholder2"), [
                               {
                                   data: d7,
                                   bars: { show: true }
                               }
                           ]);
    
 // then fetch the data with jQuery
    function onDataReceived(series) {
	 
	 	var d = [];
	 	
	    for (var i in series.result) {
	    	var timestamp = series.result[i].logTimestamp;
	    	var val = series.result[i].value * 1.0;
	    	console.log("tstamp="+timestamp + ",value="+ val);
	    	d.push([timestamp,val]);
	    }
	 
        var options = {}; 
        
        var graph = {
                data: d,
                lines: { show: true },
                points: { show: true }
            };
        
        console.log(graph);
        
        // and plot all we got
        $.plot($("#placeholder3"), [graph]);
     }
 
 	var dataurl = "http://localhost:8000/graphs/logs/data.txt";
    $.ajax({
        url: dataurl,
        method: 'GET',
        dataType: 'json',
        success: onDataReceived
    });
});
</script>

 </body>
</html>
